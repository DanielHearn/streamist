<!DOCTYPE html>
<html>
    <head>

      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="Multiple Twitch stream viewer with multiple optimized layouts and a modern interface.">
      <title>ManyTwitch</title>
      <meta name="flattr:id" content="620doo">

      <link rel="icon" type="image/png" sizes="32x32" href="favicons/favicon-32x32.png">
      <link rel="icon" type="image/png" sizes="16x16" href="favicons/favicon-16x16.png">
      <link rel="apple-touch-icon" sizes="180x180" href="favicons/apple-touch-icon.png">
      <link rel="manifest" href="favicons/manifest.json">
      <link rel="mask-icon" href="favicons/safari-pinned-tab.svg" color="#5bbad5">
      <meta name="theme-color" content="#ffffff">

      <script src="js/angular.min.js"></script>
      <script src="js/manytwitch.min.js"></script>
      <script src="js/screenfull.min.js"></script>
      <script src="js/angular-sortable-view.min.js"></script>

      <link rel="stylesheet" href="css/main.css">

      <script type="text/javascript" src="js/angular-sortable-view.min.js"></script>
      <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css?family=Raleway:300,600,700" rel="stylesheet">
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-80868144-1', 'auto');
        ga('send', 'pageview');
      </script>
    </head>
    <body class="app" ng-app="multistreamApp">
      <div class="app__controller" ng-controller="multistreamController" data-ng-init="loadApp()">

        <label class="button--overlay" ng-click="toggleMenu()">
          <span class="icon--overlay"></span>
        </label>

        <section class="controller__overlay" ng-click="toggleOverlay()"></section>

        <nav class="controller__nav">
          <div class="nav__buttons">
            <label class="button--help" for="help-input" ng-click="toggleHelp()">
              <img class="icon--help" src="img/help.svg" alt="Toggle help">
            </label>
          </div>

          <section class="nav__search">
            <h2 class="search__logo">MT</h2>
            <form class="search__form" ng-submit="addStreamFromInput()">
              <input class="form__search" type="text" ng-model="channelInput" name="" value="" placeholder="Twitch Channel" autofocus required>
              <button class="button" href="">Load</button>
            </form>
          </section>
        </nav>

        <section class="controller__settings">
          <section class="settings__container">
            <h2 class="settings__title">Settings</h2>

            <section class="setting--streamOptions">
              <h3 class="setting__title">Streams</h3>
              <form class="setting__form" ng-submit="addStreamFromInput()">
                <input class="form__search--settings" type="text" ng-model="channelInput" name="" value="" placeholder="Twitch Channel" required>
                <button class="button" href="">Load</button>
              </form>
              <section ng-if="!noStreams">
                <p class="setting__text">Drag to reorder streams.</p>
                <ul class="setting__streams" sv-root sv-part="streamList">
                  <li class="streams__stream" ng-repeat="stream in streamList track by $index" sv-element>
                    <div class="stream__handle" sv-handle>
                      <span class="handle"></span>
                    </div>
                    <p class="stream__name"> {{ stream.channel }} </p>
                    <div class="stream__settings">
                      <button class="button--small" ng-click="refreshStream($event)">
                        <img class="icon--settings" src="img/refresh.svg" alt="Refresh stream">
                      </button>
                      <button class="button--small" ng-click="deleteStream()">
                        <img class="icon--settings" src="img/close.svg" alt="Close stream">
                      </button>
                    </div>
                  </li>
                </ul>
              </section>
              <button class="button--setting" ng-click="clearStreams()">Clear Streams</button>
            </section>

            <section class="setting--layoutOptions">
              <h3 class="setting__title">Layouts</h3>
              <div class="setting__dropdown--settings">
                <select class="setting__select--settings" name="availableLayouts" ng-model="availableLayouts" ng-change="setLayout()">
                  <option class="select__option" value="grid" selected>Grid Layout</option>
                  <option class="select__option" value="column">Column Layout</option>
                </select>
              </div>
              <button class="button--setting" type="button" name="toggleFullscreen" ng-click="toggleFullscreen()">Toggle Fullscreen</button>
              <div class="setting__switch">
                <p class="switch__title">Minimise interface</p>
                <label class="switch">
                  <input class="switch__checkbox" type="checkbox">
                  <span class="switch__slider" ng-click="toggleInterface()"></span>
                </label>
              </div>
            </section>

            <section class="setting--chatOptions">
              <h3 class="setting__title">Chat</h3>
              <section class="chat__setting--settings">
                <div class="setting__dropdown--chat">
                  <select class="setting__select--chat" name="availableChats" ng-model="availableChats" data-ng-click="getMainChat()" ng-change="getMainChat()">
                    <option class="select__option" value="">-Select Chat-</option>
                    <option class="select__option" ng-repeat="stream in streamList" value="{{stream.channel}}" ng-selected="availableChats == stream.channel">{{stream.channel}}</option>
                  </select>
                </div>
                <button class="button--chat" ng-click="refreshMainChat()">
                  <img class="icon--chat" src="img/refresh.svg" alt="Refresh main chat">
                </button>
              </section>
              <div class="setting__switch">
                <p class="switch__title">Chat Visibility</p>
                <label class="switch">
                  <input class="switch__checkbox" type="checkbox" checked>
                  <span class="switch__slider" ng-click="toggleChat()"></span>
                </label>
              </div>
            </section>

            <section class="setting--usageOptions">
              <h3 class="setting__title">Usage</h3>
              <button class="button" type="button" name="clearStorage" ng-click="clearStorage()">Clear Usage Data</button>
            </section>

            <section class="setting--about">
              <h2 class="about__heading">About</h2>
              <p class="about__content">Developed by <a class="link" href="http://www.danielhearn.co.uk">Daniel Hearn</a>, source available on <a class="link" href="https://github.com/DanielHearn/manytwitch">GitHub</a> (contributions welcome!).</p>
              <p class="about__content">For features suggestions and bug reports, email them to <a class="link" href="mailto:manytwitch@danielhearn.co.uk">manytwitch@danielhearn.co.uk</a>.</p>
            </section>
          </section>
        </section>

        <section class="controller__modals">

          <section class="modal--welcome">
            <div class="modal__header">
              <h4 class="header__title">Welcome to Manytwitch</h4>
            </div>
            <div class="modal__content">
              <p class="content__text">Welcome to Manytwitch, a multiple <a class="link" href="https://twitch.tv">Twitch.tv</a> stream viewer.</p>
              <p class="content__text">To watch a twitch channel enter the channel name into the search bar and click load.</p>
              <p class="content__text">Open the settings on the top left to reorder streams, change the layout and configure the user interface.</p>
              <div class="modal__buttons">
                <button class="button--modal" type="button" name="yes" ng-click="acceptModalGeneric()">Continue</button>
              </div>
            </div>
          </section>

          <section class="modal--return">
            <div class="modal__header">
              <h4 class="header__title">Welcome Back</h4>
            </div>
            <div class="modal__content">
              <p class="content__text">Do you want to load the streams from your last Manytwitch session.</p>
              <p class="content__text--bold">{{ lastStreams }}</p>
              <div class="modal__buttons">
                <button class="button--secondary button--modal" type="button" name="no" ng-click="acceptModalGeneric()">No</button>
                <button class="button--modal loadLastSession" type="button" name="yes" ng-click="loadLastSession()">Yes</button>
              </div>
            </div>
          </section>

          <section class="modal--help">
            <div class="modal__header">
              <h4 class="header__title">Help</h4>
            </div>
            <div class="modal__content">
              <p class="content__text">To watch a twitch channel enter the channel name into the search bar and click load.</p>
              <p class="content__text">Open the settings on the top left to reorder streams, change the layout and configure the user interface.</p>
              <div class="modal__buttons">
                <button class="button--modal" type="button" name="yes" ng-click="acceptModalGeneric()">Close</button>
              </div>
            </div>
          </section>

        </section>

        <section class="controller__intro">
          <section class="intro__content">
            <h1 class="intro__title">MANYTWITCH</h1>
            <h2 class="intro__subheading">Multiple Twitch stream viewer</h2>
            <p class="intro__text">Enter a twitch channel to start. On mobile use the load bar within the settings menu.</p>
            <p class="intro__text">Use the menu on the top left to change the interface settings and click on help in the top left for more help.</p>
          </section>
        </section>

        <section class="controller__streams">

          <section class="streams__container">
            <section class="stream" ng-repeat="stream in streamList track by $index"  id="{{stream.channel}}">
              <section class="stream__player">
                <iframe class="player__iframe {{stream.channel}}player"
                        ng-src="{{trustSrc(stream.player)}}"
                        frameborder="0"
                        scrolling="no"
                        allowfullscreen="true">
                </iframe>
              </section>
              <section class="stream__chat">
                <iframe class="chat__iframe {{stream.channel}}chat"
                        ng-src="{{trustSrc(stream.chat)}}"
                        frameborder="0"
                        scrolling="no"
                        width="20%">
                </iframe>
              </section>
            </section>
          </section>

          <section class="streams__chat">
            <section class="chat__setting--chat">
              <div class="setting__dropdown--chat">
                <select class="setting__select--chat" name="availableChats" ng-model="availableChats" data-ng-click="getMainChat()" ng-change="getMainChat()">
                  <option class="select__option" value="">-Select Chat-</option>
                  <option class="select__option" ng-repeat="stream in streamList" value="{{stream.channel}}" ng-selected="availableChats == stream.channel">{{stream.channel}}</option>
                </select>
              </div>
              <button class="button--chat" ng-click="refreshMainChat()">
                <img class="icon--chat" src="img/refresh.svg" alt="Refresh main chat">
              </button>
            </section>
            <section class="chat__container">
              <iframe class="chat__iframe--main"
                      id="mainChat"
                      ng-src="{{trustSrc(mainChatUrl)}}"
                      frameborder="0"
                      scrolling="no"
                      width="20%">
              </iframe>
            </section>
          </section>

        </section>
      </div>
    </body>
</html>
