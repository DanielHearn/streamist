const Rule = require('../Rule');

function traverse(o, fn, p) {
  let path = p || '';
  Object.keys(o).forEach((i) => {
    if (o[i] !== null && typeof (o[i]) === 'object' && !(o[i] instanceof Rule)) {
      traverse(o[i], fn, `${path}.${i}`);
    } else {
      fn.apply(null, [o[i], `${path}.${i}`.substr(1)]);
      //path = '';
    }
  });
}


function getValFromPath(p, obj) {
  for (let i=0, path=p.split('.'), len=path.length; i<len; i++){
    if (obj.hasOwnProperty(path[i])) {
      obj = obj[path[i]];
    }
  };
  return obj;
}

module.exports = { getValFromPath, traverse };
